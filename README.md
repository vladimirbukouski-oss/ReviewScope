# üîç ReviewScope Production

**AI-powered review analysis system for Wildberries & Onliner**

–ê–Ω–∞–ª–∏–∑ –æ—Ç–∑—ã–≤–æ–≤ —Å –ø–æ–º–æ—â—å—é ML –º–æ–¥–µ–ª–µ–π –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –¥–æ–≤–µ—Ä–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI-—Ä–µ–∑—é–º–µ —Ç–æ–≤–∞—Ä–æ–≤.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **–ê–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏** ‚Äî –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤ (–ø–æ–∑–∏—Ç–∏–≤/–Ω–µ–π—Ç—Ä–∞–ª—å/–Ω–µ–≥–∞—Ç–∏–≤)
- ‚≠ê **–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞** ‚Äî ML-–º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∑–≤—ë–∑–¥—ã
- üõ°Ô∏è **Trust Score** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ –¥–æ–≤–µ—Ä–∏—è –∫ –æ—Ç–∑—ã–≤–∞–º
- üí¨ **RAG-—á–∞—Ç** ‚Äî –∑–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ—Ç–∑—ã–≤–∞–º —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏
- üìä **AI Summary** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑—é–º–µ —Ç–æ–≤–∞—Ä–∞ —Å –ø–ª—é—Å–∞–º–∏/–º–∏–Ω—É—Å–∞–º–∏
- üîç **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** ‚Äî HNSW –∏–Ω–¥–µ–∫—Å –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ Docker)

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd backend
pip install -r requirements.txt

# 2. –ù–∞—Å—Ç—Ä–æ–π .env
cp .env.example .env
nano .env  # –¥–æ–±–∞–≤—å —Å–≤–æ–π OPENAI_API_KEY

# 3. –ó–∞–ø—É—Å—Ç–∏ backend
python main.py

# Backend –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8888
```

### –° Docker

```bash
# 1. –°–æ–±–µ—Ä–∏ –∏ –∑–∞–ø—É—Å—Ç–∏
docker-compose up --build

# 2. –û—Ç–∫—Ä–æ–π http://localhost:8888/health
```

### –î–µ–ø–ª–æ–π –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥

üìñ **[–ß–∏—Ç–∞–π QUICKSTART.md](./QUICKSTART.md)** ‚Äî –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Railway/Render

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
reviewscope-production/
‚îú‚îÄ‚îÄ reviewscope_all.py       # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç (Stage 0-4)
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt     # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ .env                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –≤ git!)
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ sentiment/final/     # –ú–æ–¥–µ–ª—å —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (~1.1GB)
‚îÇ   ‚îî‚îÄ‚îÄ rating/final/        # –ú–æ–¥–µ–ª—å —Ä–µ–π—Ç–∏–Ω–≥–∞ (~1.1GB)
‚îú‚îÄ‚îÄ frontend/dist/           # –°–æ–±—Ä–∞–Ω–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ Dockerfile               # Docker –æ–±—Ä–∞–∑ —Å –º–æ–¥–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ Dockerfile.light         # –õ–µ–≥–∫–∏–π –æ–±—Ä–∞–∑ (–º–æ–¥–µ–ª–∏ –∏–∑ –æ–±–ª–∞–∫–∞)
‚îî‚îÄ‚îÄ docker-compose.yml       # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment Variables

```bash
OPENAI_API_KEY=sk-your-key-here    # OpenAI API –∫–ª—é—á
LLM_PROVIDER=openai                # openai | groq
LLM_MODEL=gpt-4o-mini              # –ú–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
EMB_MODEL=text-embedding-3-small   # –ú–æ–¥–µ–ª—å –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
DEVICE=cpu                         # cpu | cuda
SENT_MODEL=../models/sentiment/final
RATE_MODEL=../models/rating/final
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

–í [backend/main.py](backend/main.py:211-215):
```python
min_len_fetch=15,  # –ú–∏–Ω–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–∏ —Å–±–æ—Ä–µ
min_len=20,        # –ú–∏–Ω–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
min_alpha=10,      # –ú–∏–Ω–∏–º—É–º –±—É–∫–≤/—Ü–∏—Ñ—Ä
```

---

## üì° API Endpoints

### `POST /analyze`
–ó–∞–ø—É—Å–∫–∞–µ—Ç –∞–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–∞
```json
{
  "url": "https://www.wildberries.ru/catalog/123456789",
  "use_cache": true
}
```

### `GET /status/{session_id}`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∞–Ω–∞–ª–∏–∑–∞

### `GET /summary/{session_id}`
–ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ (AI summary + –æ—Ç–∑—ã–≤—ã)

### `POST /chat/{session_id}`
RAG-—á–∞—Ç —Å –æ—Ç–∑—ã–≤–∞–º–∏
```json
{
  "session_id": "abc123",
  "question": "–ö–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–∏–Ω—É—Å—ã —Ç–æ–≤–∞—Ä–∞?"
}
```

### `GET /reviews/{session_id}`
–°–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π

üìñ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API:** http://localhost:8888/docs (Swagger UI)

---

## üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Pipeline (4 —Å—Ç–∞–¥–∏–∏):

1. **Stage 0-2: Fetch**
   - –°–æ–±–∏—Ä–∞–µ—Ç –æ—Ç–∑—ã–≤—ã —Å WB/Onliner
   - –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

2. **Stage 3: Scoring**
   - Sentiment classification (3 –∫–ª–∞—Å—Å–∞)
   - Rating prediction (5 –∫–ª–∞—Å—Å–æ–≤)
   - Trust score calculation

3. **Stage 4a: RAG**
   - –í–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (OpenAI)
   - HNSW –∏–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞
   - Reranking –ø–æ trust + similarity

4. **Stage 4b: Summary**
   - LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ–∑—é–º–µ
   - –ü–ª—é—Å—ã/–º–∏–Ω—É—Å—ã —Å evidence_ids
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è

---

## ü§ù Contributing

```bash
# 1. –§–æ—Ä–∫–Ω–∏ —Ä–µ–ø–æ
# 2. –°–æ–∑–¥–∞–π –≤–µ—Ç–∫—É
git checkout -b feature/awesome-feature

# 3. –ö–æ–º–º–∏—Ç
git commit -m "Add awesome feature"

# 4. Push
git push origin feature/awesome-feature

# 5. –û—Ç–∫—Ä–æ–π Pull Request
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[QUICKSTART.md](./QUICKSTART.md)** ‚Äî –±—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π
- **[DEPLOY.md](./DEPLOY.md)** ‚Äî –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ö–æ—Å—Ç–∏–Ω–≥–∞
- **[commands.md](./commands.md)** ‚Äî —à–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –∫–∞–∫ —Ö–æ—á–µ—à—å! üéâ

---

## üêõ –ù–∞—à—ë–ª –±–∞–≥?

–°–æ–∑–¥–∞–π issue –Ω–∞ GitHub —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã –∏ –ª–æ–≥–∞–º–∏.

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤ –∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π**
